# Лабораторная работа 2
## Задание
Необходимо реализовать два примитивных детектора объектов на
изображении, работающих с помощью поиска эталона на входном
изображении.
1. Прямой поиск одного изображения на другом (template matching)
2. Поиск ключевых точек эталона на входном изображении (например, с
помощью SIFT, ORB..)
Программа должна принимать на вход два изображения, эталон и то, на
котором будет производиться поиск. На выходе программа должна строить
рамку в виде четырехугольника в области, где с наибольшей вероятностью
находится искомый объект. Необходимо протестировать оба варианта
программы на разных изображениях (например, сначала в качестве эталона
использовать вырезанный фрагмент входного изображения, а затем
изображение какого-либо предмета сцены, присутствующего на входном
изображении, но сфотографированного с другого ракурса или с другим
освещением), не менее 10 тестовых примеров

## Теоретические основы
В данной работе рассматриваются два метода детектирования объектов - 
прямой поиск и поиск ключевых точек.

Прямой поиск представляет собой проход по входному изображению окном, равным по размеру эталону.
На каждом шаге происходит вычисление среднего модуля разности между всеми пикселями входного
изображения, попавшими в окно и эталоном. Эта операция похожа на свертку, но вместо взвешенной суммы вычисляется среднее разности.
Результат такой операции можно интерпретировать как карту "похожести" участков изображения на эталон.
Чем меньше значение карты, тем более данный участок близок к эталону. Координаты пикселя с наименьшим значением
можно считать координатами верхнего левого угла рамки.

Детектирование с помощью ключевых точек использует алгоритм ORB. Этот алгоритм вычисляет массив ключевых точек, состоящий из их координат и дескрипторов.
Такие массивы вычисляются для входного изображения и эталона. После чего вычисляется массив матчей, то есть совпадений точек. 
Из этого массива выбираются N пар ближайших точек, число N является параметром алгоритма.
Далее для всех этих точек для входного изображения выбираются верхняя левая и нижняя правая. Они и являются координатами рамки.

## Описание системы
Система состоит из класса Detector, реализующего высокоуровневую логику обработки
и функций-коллбэков, реализующих конкретные алгоритмы детектирования. Основной класс производит предобработку
изображений, а именно перевод их в черно-белый формат. После этого вызывается коллбэк, который возвращает координаты рамки.
Используя полученные координаты, детектор производит отрисовку рамки на исходном изображении и визуализацию результата.

## Примеры работы
Код и примеры работы системы представлены в файле Lab2.ipynb

## Вывод
В ходе работы были реализованы два алгоритма детектирования объектов и проведено их сравнение.
Алгоритм прямого поиска хорошо работает, если эталон является частью исходного изображения. Однако такой алгоритм очень неустойчив к любым
изменениям эталона, таким как изменение яркости, повороты, отражения и так далее. 

Алгоритм с использованием ключевых точек более устойчив к изменениям эталона, однако точность детектирования
такого алгоритма все равно существенно ниже, чем у алгоритмов на основе сверточных нейронных сетей. При этом алгоритм поиска
ключевых точек менее устойчив на примерах с несколькими однотипными объектами, чем алгоритм прямого поиска